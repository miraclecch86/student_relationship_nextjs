# 🔄 데모 학급 복사 기능 사용법

데모 학급을 자신의 계정으로 복사하여 자유롭게 수정하고 분석할 수 있습니다!

## 🎯 **이 기능이 필요한 경우**

- ✅ **개발자/관리자**: 실제 기능 테스트 및 분석
- ✅ **데이터 수정 필요**: 데모 데이터를 바탕으로 실험하고 싶을 때
- ✅ **기능 학습**: 모든 기능을 제한 없이 체험하고 싶을 때
- ✅ **커스터마이징**: 데모 학급을 기반으로 나만의 학급 만들기

## 💡 **복사 방법**

### 🌐 **1. 웹 UI 사용 (권장)**

1. **데모 학급** 페이지로 이동
2. **"📋 내 계정으로 복사하기"** 버튼 클릭
3. 새 학급명 입력 (선택사항)
4. 복사 완료 후 새 학급으로 이동

### 🛠️ **2. 터미널 스크립트 사용**

```bash
# 1. 환경 변수 확인
echo $SUPABASE_SERVICE_ROLE_KEY  # 설정되어 있어야 함

# 2. 스크립트 실행
node scripts/copy-demo-class.js [사용자_ID] [새_학급명]

# 예시
node scripts/copy-demo-class.js "abc123-def456-ghi789" "내가 만든 샘솔반"
```

### 📡 **3. API 직접 호출**

```javascript
// POST /api/classes/[demo_class_id]/copy
const response = await fetch(`/api/classes/${demoClassId}/copy`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    name: '새 학급 이름' // 선택사항
  })
});

const result = await response.json();
console.log(result.data.newClass.id); // 새 학급 ID
```

## 📊 **복사되는 데이터**

| 데이터 타입 | 수량 | 설명 |
|------------|------|------|
| 🏫 학급 | 1개 | 새로운 학급으로 생성 |
| 👥 학생 | 40명 | 모든 학생 정보 (이름, 성별, 위치) |
| 📋 설문 | 9개 | 4월~12월 월별 설문 |
| ❓ 질문 | 45개 | 설문별 5개 질문 |
| 🤝 관계 | ~14,040개 | 학생 간 관계 데이터 |
| 💭 답변 | ~1,800개 | 학생별 설문 답변 |

## ⚡ **복사 과정**

```
🔍 데모 학급 조회
    ↓
🏫 새 학급 생성
    ↓
👥 학생 데이터 복사 (40명)
    ↓
📋 설문 데이터 복사 (9개)
    ↓
❓ 질문 데이터 복사 (45개)
    ↓
🤝 관계 데이터 복사 (~14,040개)
    ↓
💭 답변 데이터 복사 (~1,800개)
    ↓
✅ 복사 완료!
```

## 🎛️ **복사 후 가능한 기능**

### ✏️ **편집 가능**
- 학급 정보 수정
- 학생 추가/삭제/수정
- 설문 생성/수정/삭제
- 관계 데이터 수정
- 답변 수정

### 📈 **분석 기능**
- 관계 네트워크 분석
- 설문 결과 분석
- 학급 분위기 분석
- 데이터 시각화

### 🔧 **관리 기능**
- 데이터 백업/복원
- 설정 변경
- 권한 관리

## 🚨 **주의사항**

### ⚠️ **복사 제한**
- **데모 학급만** 복사 가능
- **로그인 필수**: 복사하려면 인증 필요
- **개인 학급**: 다른 사용자 학급은 복사 불가

### 💾 **데이터 크기**
- 약 **15,000+ 레코드** 복사
- 복사 시간: **30초~2분** 소요
- 네트워크 상태에 따라 시간 변동

### 🔄 **중복 복사**
- 같은 데모 학급을 **여러 번 복사 가능**
- 각각 **독립적인 학급**으로 생성
- 이름으로 구분 권장

## 🛠️ **문제 해결**

### ❌ **복사 실패 시**

```bash
# 1. 권한 확인
echo $SUPABASE_SERVICE_ROLE_KEY

# 2. 네트워크 연결 확인
curl -I https://your-supabase-url.supabase.co

# 3. 로그 확인
tail -f logs/copy-demo-class.log
```

### 🔧 **일반적인 문제**

| 문제 | 원인 | 해결책 |
|------|------|--------|
| "로그인 필요" | 인증 만료 | 다시 로그인 |
| "권한 없음" | 일반 학급 복사 시도 | 데모 학급만 복사 |
| "복사 실패" | 네트워크 오류 | 잠시 후 재시도 |
| "데이터 누락" | 중간 중단 | 전체 재실행 |

## 🎉 **복사 완료 후**

### 📌 **확인 사항**
- [x] 새 학급이 내 학급 목록에 표시
- [x] 모든 학생 데이터 정상 로드
- [x] 설문 및 질문 데이터 확인
- [x] 관계 데이터 시각화 정상 작동

### 🚀 **다음 단계**
1. **학급 정보 커스터마이징**
2. **추가 학생/설문 등록**
3. **관계 분석 실행**
4. **결과 데이터 다운로드**

---

## 🔗 **관련 문서**

- [데모 데이터 생성 가이드](./DEMO_SETUP_GUIDE.md)
- [데이터 스키마 문서](./SCHEMA.md)
- [API 문서](./API.md)
- [관리자 가이드](./ADMIN_GUIDE.md)

> 💡 **팁**: 복사된 학급은 완전히 독립적이므로 마음껏 실험해보세요! 