제품 요구사항 정의서 (PRD): 스마트 학급 일지 (v1.1)
문서 버전: 1.1
작성일: 2025년 5월 29일
작성자: [선생님 성함 또는 팀 이름] (학생 관계 앱 개발팀)
최종 업데이트: 2025년 5월 29일

1. 개요 (Overview)
본 문서는 학생 관계 관리 애플리케이션 내에 새롭게 추가될 "스마트 학급 일지" 기능에 대한 요구사항을 정의합니다. 이 기능은 교사가 학급의 일상적인 기록(알림장, 학생 출결 및 상태, 학급 특이사항 등)을 쉽고 효율적으로 관리하고 검색할 수 있도록 지원하여, 교사의 업무 부담을 경감시키고 학생 지도 및 학급 운영에 필요한 정보를 체계적으로 축적하는 것을 목표로 합니다.

2. 목표 (Goals)
교사가 매일의 학급 정보를 간편하게 기록하고 조회할 수 있도록 한다.
기록된 학급 일지 내용을 키워드 기반으로 빠르게 검색할 수 있도록 한다.
알림장 작성을 자동화하여 교사의 반복 업무를 줄인다.
학생 개개인의 출결 및 특이사항을 체계적으로 관리하고, 필요시 쉽게 확인할 수 있도록 한다.
학급 전체의 주요 사건이나 분위기를 기록하여 장기적인 학급 운영 및 학생 이해 자료로 활용할 수 있도록 한다.
캘린더 기반의 직관적인 UI를 제공하여 사용 편의성을 높인다.
3. 대상 사용자 (Target Users)
초등학교, 중학교, 고등학교 교사 (주 사용자는 담임교사)
4. 기능 명세 (Functional Requirements)
4.1. 학급 일지 접근
F-HL-001: 사용자가 로그인 후 학급 대시보드에 접근하면 "학급 일지"라는 제목의 카드가 표시되어야 한다.
F-HL-002: "학급 일지" 카드를 클릭하면 화면 전체를 사용하는 월별 캘린더 뷰로 이동해야 한다.
4.2. 월별 캘린더 뷰
F-HL-003: 월별 캘린더가 기본적으로 표시되어야 하며, 이전/다음 달로 쉽게 이동할 수 있는 네비게이션 버튼이 제공되어야 한다. (예: <, >)
F-HL-004 (수정): 캘린더 상단 영역에는 "학급 일지 내용 검색"을 위한 입력 필드와 "검색" 버튼이 제공되어야 한다.
F-HL-004.1 (신규 - 검색 기능): 교사가 검색어(키워드)를 입력하고 "검색" 버튼을 클릭하면, 해당 검색어를 포함하는 학급 일지 내용(알림장 키워드/내용, 학생 메모, 학급 메모)이 있는 날짜들이 캘린더에 시각적으로 강조 표시되거나 (예: 배경색 변경), 검색 결과 목록이 별도로 제공되어야 한다.
F-HL-004.2 (신규 - 검색 결과): 검색 결과 클릭 시 해당 날짜의 관련 내용(예: 검색어가 포함된 '오늘의 아이들' 메모)으로 바로 이동하거나 해당 내용을 요약하여 보여줄 수 있어야 한다.
F-HL-005 (기존 F-HL-004로 변경 및 수정): 캘린더의 각 날짜 셀에는 해당 날짜에 기록된 내용(알림장, 오늘의 아이들, 오늘의 우리 반)이 있는 경우, 이를 나타내는 시각적 표시(예: 작은 텍스트 태그 또는 아이콘)가 있어야 한다.
F-HL-005.1: "오늘의 우리 반"에 내용이 작성된 경우, 해당 날짜 셀에 "오늘의 우리 반" 텍스트 태그가 표시되어야 한다.
F-HL-005.2: "오늘의 아이들"에서 출석 상태 변경이나 메모가 작성된 경우, 해당 날짜 셀에 "오늘의 아이들" 텍스트 태그가 표시되어야 한다.
F-HL-005.3: "알림장"이 생성된 경우, 해당 날짜 셀에 "알림장" 텍스트 태그가 표시되어야 한다.
F-HL-005.4: 해당 날짜 셀에 표시된 텍스트 태그(예: "오늘의 아이들")를 클릭하면, 해당 날짜의 해당 기능 페이지로 직접 이동해야 한다.
F-HL-006 (기존 F-HL-005로 변경): 캘린더에서 특정 날짜 셀을 클릭하면 해당 날짜의 상세 페이지("날짜 페이지")로 이동해야 한다.
4.3. 날짜 페이지 (일일 기록 선택)
F-HL-007 (기존 F-HL-006으로 변경): 날짜 페이지 상단에는 선택된 날짜가 명확히 표시되어야 한다. (예: "2025년 5월 29일 목요일")
F-HL-008 (기존 F-HL-007으로 변경): 날짜 페이지에는 다음 세 가지 기능을 선택할 수 있는 목록 또는 버튼 그룹이 제공되어야 한다:
알림장 생성
오늘의 아이들
오늘의 우리 반
F-HL-009 (기존 F-HL-008으로 변경): 각 목록 아이템 또는 버튼을 클릭하면 해당 기능의 상세 입력/조회 페이지로 이동해야 한다.
4.4. 알림장 생성 페이지
F-HL-010 (기존 F-HL-009로 변경): 교사가 직접 알림장 내용을 입력할 수 있는 UI가 제공되어야 한다.
F-HL-010.1: "주요 키워드" 입력 필드 (텍스트, 여러 개 입력 가능)
F-HL-010.2: "상세 내용 (Description)" 입력 필드 (텍스트 에디터 또는 여러 줄 텍스트 영역)
F-HL-011 (기존 F-HL-010으로 변경): "알림장 생성" 버튼이 제공되어야 한다.
F-HL-012 (기존 F-HL-011으로 변경): "알림장 생성" 버튼을 클릭하면, 입력된 "주요 키워드"와 "상세 내용"을 바탕으로 AI가 학부모에게 전달하기 적합한 정중하고 깔끔한 스타일의 알림장 내용을 생성해야 한다.
AI-HL-001: 생성된 알림장은 문법적으로 정확하고, 오해의 소지가 없으며, 긍정적이고 존중하는 어투를 사용해야 한다.
AI-HL-002: 키워드와 상세 내용을 적절히 조합하여 자연스러운 문장으로 구성해야 한다.
F-HL-013 (기존 F-HL-012로 변경): AI가 생성한 알림장 내용은 페이지 하단의 "생성된 알림장" 섹션(읽기 전용 텍스트 박스 또는 유사 UI)에 표시되어야 한다.
F-HL-014 (기존 F-HL-013으로 변경): 교사는 생성된 알림장 내용을 복사하거나, (선택적 기능) 특정 채널(예: 학부모 앱 연동 시)로 바로 발송할 수 있는 기능을 제공할 수 있다. (이번 버전에서는 복사 기능 우선)
F-HL-015 (기존 F-HL-014로 변경): 생성된 알림장은 해당 날짜와 연결되어 저장되어야 하며, 추후 조회 및 수정이 가능해야 한다. (수정 시 AI 재 생성 또는 직접 편집 선택 가능)
4.5. 오늘의 아이들 페이지 (출석 및 상태 관리)
F-HL-016 (기존 F-HL-015로 변경): 페이지에 진입하면 현재 학급의 학생 목록이 개별 카드 형태로 나열되어야 한다. (학생 목록 정보는 기존 students 테이블 활용)
F-HL-016.1: 각 학생 카드에는 학생의 번호(선택적), 이름이 표시되어야 한다.
F-HL-017 (기존 F-HL-016으로 변경): 각 학생 카드 하단에는 학생의 출결 상태를 선택할 수 있는 버튼 그룹이 제공되어야 한다: "출석", "조퇴", "결석", "체험학습".
F-HL-017.1: 기본값은 "출석"으로 선택되어 있어야 한다.
F-HL-017.2: 교사가 특정 버튼을 선택하면 해당 학생의 출결 상태가 해당 날짜에 기록되어야 한다.
F-HL-018 (기존 F-HL-017으로 변경): 각 학생 카드 중앙 또는 하단에는 해당 학생에 대한 당일 특이사항을 메모할 수 있는 텍스트 입력 영역(여러 줄 가능)이 제공되어야 한다.
F-HL-018.1: 입력된 메모는 해당 학생, 해당 날짜와 연결되어 저장되어야 한다.
F-HL-019 (기존 F-HL-018으로 변경): 페이지 하단 또는 상단에 "저장" 버튼이 제공되어야 하며, 클릭 시 해당 날짜의 모든 학생에 대한 출결 상태 및 메모가 일괄 저장되어야 한다. (또는 개별 카드 변경 시 자동 저장 방식도 고려 가능)
4.6. 오늘의 우리 반 페이지 (학급 특이사항 기록)
F-HL-020 (기존 F-HL-019로 변경): 페이지에 진입하면 해당 날짜의 학급 전체 특이사항을 자유롭게 기록할 수 있는 대형 텍스트 입력 영역(리치 텍스트 에디터 또는 여러 줄 텍스트 영역)이 제공되어야 한다.
F-HL-021 (기존 F-HL-020으로 변경): 교사는 이 공간에 학급에서 발생한 사소한 일, 중요한 사건, 학급 분위기, 특별 활동 내용 등 무엇이든 자유롭게 텍스트 형태로 기록할 수 있다.
F-HL-022 (기존 F-HL-021로 변경): "저장" 버튼이 제공되어야 하며, 클릭 시 입력된 내용이 해당 날짜와 연결되어 저장되어야 한다.
F-HL-023 (기존 F-HL-022로 변경): 저장된 내용은 추후 조회 및 수정이 가능해야 한다.
5. 데이터 모델 (Data Model)
신규 테이블:

class_journals (학급 일지 마스터 테이블)
id (PK, UUID, default uuid_generate_v4())
class_id (FK, classes.id, on delete cascade, not null)
journal_date (Date, 기록 날짜, not null)
created_at (Timestamp with time zone, default now())
updated_at (Timestamp with time zone, default now())
Unique constraint: (class_id, journal_date)
journal_announcements (알림장)
id (PK, UUID, default uuid_generate_v4())
journal_id (FK, class_journals.id, on delete cascade, not null)
keywords (Text[], nullable)
teacher_input_content (Text, nullable)
ai_generated_content (Text, nullable)
created_at (Timestamp with time zone, default now())
updated_at (Timestamp with time zone, default now())
journal_student_status (오늘의 아이들)
id (PK, UUID, default uuid_generate_v4())
journal_id (FK, class_journals.id, on delete cascade, not null)
student_id (FK, students.id, on delete cascade, not null)
attendance_status (Enum: "출석", "조퇴", "결석", "체험학습", default '출석', not null)
memo (Text, nullable)
created_at (Timestamp with time zone, default now())
updated_at (Timestamp with time zone, default now())
Unique constraint: (journal_id, student_id)
journal_class_memos (오늘의 우리 반)
id (PK, UUID, default uuid_generate_v4())
journal_id (FK, class_journals.id, on delete cascade, not null)
content (Text, nullable)
created_at (Timestamp with time zone, default now())
updated_at (Timestamp with time zone, default now())
기존 테이블 활용:

classes: 학급 정보
students: 학생 목록 정보
6. 사용자 인터페이스 (UI/UX) 고려사항
UI-HL-001: 전체적으로 사용자 친화적이고 직관적인 디자인을 적용한다.
UI-HL-002: 캘린더는 모바일 환경에서도 사용하기 쉽도록 반응형으로 디자인한다.
UI-HL-003: 각 입력 페이지는 명확한 제목과 입력 가이드라인을 제공한다.
UI-HL-004: 저장, 수정, 삭제 등의 작업에 대한 사용자 피드백(예: 성공 메시지, 로딩 인디케이터)을 명확히 제공한다.
UI-HL-005: AI 알림장 생성 시, 생성 중임을 나타내는 로딩 상태를 표시한다.
UI-HL-006 (신규): 검색 기능 사용 시, 검색 진행 중임을 나타내는 표시와 검색 결과가 없을 경우 "검색 결과 없음" 메시지를 명확히 표시한다.
7. 기술적 고려사항 (Technical Considerations)
TECH-HL-001: 알림장 생성 기능은 lib/gemini.ts 또는 lib/openai.ts 를 통해 Gemini 또는 OpenAI 모델 API를 호출하여 구현한다. 프롬프트는 교사가 입력한 키워드와 상세 내용을 바탕으로 정중한 학부모용 알림장을 생성하도록 구성한다.
TECH-HL-002: 학생 목록은 기존 students 테이블에서 해당 class_id로 필터링하여 가져온다.
TECH-HL-003: 모든 데이터는 Supabase 데이터베이스에 안전하게 저장 및 관리되어야 한다.
TECH-HL-004: 날짜 기반 조회 및 필터링 성능을 고려하여 데이터베이스 쿼리를 최적화한다.
TECH-HL-005 (신규): 학급 일지 내용 검색 기능은 journal_announcements.keywords, journal_announcements.teacher_input_content, journal_announcements.ai_generated_content, journal_student_status.memo, journal_class_memos.content 필드를 대상으로 Full-Text Search 또는 LIKE 연산자를 활용하여 구현한다. 검색 성능을 위해 필요한 경우 인덱스를 생성한다.
8. 릴리즈 기준 (Release Criteria)
위에 명시된 모든 핵심 기능(F-HL-001 ~ F-HL-023, AI-HL-001 ~ AI-HL-002)이 정상적으로 작동해야 한다.
주요 사용자 시나리오(학급 일지 조회, 검색, 알림장 생성, 학생 상태 기록, 학급 메모 작성)에 대한 테스트가 완료되어야 한다.
데이터 저장 및 조회 시 오류가 발생하지 않아야 한다.
UI가 의도한 대로 표시되고 작동해야 한다.
9. 향후 개선 방향 (Future Enhancements) - 선택 사항
생성된 알림장을 학부모에게 직접 발송하는 기능 (푸시 알림, SMS 연동 등)
특정 기간 동안의 학생 출결 통계 및 특이사항 요약 리포트 생성
학급 사진이나 파일 첨부 기능
교사 간 학급 일지 공유 (선택적)
캘린더 검색 결과 필터링 옵션 (예: 내용 유형별, 기간별)